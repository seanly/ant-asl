<project name="asl-macros-ci">
  <description>
    原子任务ci相关宏(macro)的定义
  </description>

  <macrodef name="ci">
    <attribute name="task" />
    <sequential>
      <if>
        <not>
          <isset property="asl.tasks.root" />
        </not>
        <then>
          <printLog type="err"
            message="asl.tasks.root is not set"
            message.zh="asl.tasks.root没有设置" 
            />
        </then>
      </if>

      <property name="task.run.xml" location="${asl.tasks.root}/@{task}/run.xml" />

      <if>
        <available file="${task.run.xml}" />
        <then>
          <ant antfile="${task.run.xml}" inheritRefs="true" />
        </then>
        <else>
          <printLog type="err"
            message="task/run.xml is not exists"
            message.zh="task/run.xml文件不存在" 
            />
        </else>
      </if>
    </sequential>
  </macrodef>

</project>
