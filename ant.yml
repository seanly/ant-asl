
environment:
  APP_NAME: sample
  APP_VERSION: "1.0"

# pipeline模板
pipeline:
- name: build
  environment:
    WORLD: world
  tasks:
    - task.id: asl-tasks/sample
      arg1: hello-${env.WORLD}
    - task.id: script
      code: |
        echo "echo $WORLD"
    - task.id: script
      code: ./jenkins.sh build
    - package:
        artifact.version: ${env.APP_VERSION}
        fileset.includes: 'tasks/**'
  after-tasks:
    - task.id: script
      code: ./jenkins.sh build

  when:
    environment:
      WORLD: world
